<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.edumate.boot.domain.notice.model.mapper.NoticeMapper">
	
	<select id="getTotalCount" resultType="_int">
		SELECT COUNT(*) FROM NOTICE_BOARD WHERE BOARD_YN = 'Y'
	</select>
	
	<select id="getSearchTotalCount" resultType="_int">
		SELECT COUNT(*) FROM NOTICE_BOARD WHERE NOTICE_TITLE LIKE '%'||#{searchKeyword}||'%' AND BOARD_YN = 'Y'
	</select>
	<select id="selectNoticeList" resultType="Notice">
		SELECT * FROM NOTICE_BOARD WHERE BOARD_YN = 'Y' ORDER BY NOTICE_ID DESC
	</select>
	<select id="selectSearchList" resultType="Notice">
		SELECT * FROM NOTICE_BOARD WHERE NOTICE_TITLE LIKE '%'||#{searchKeyword}||'%' AND BOARD_YN = 'Y'
	</select>
	<select id="selectByOneNo" resultType="Notice">
			SELECT * FROM NOTICE_BOARD WHERE NOTICE_ID = #{noticeId}
	</select>
	<select id="selectPrevNotice" resultType="_int">
		SELECT MAX(NOTICE_ID) FROM NOTICE_BOARD WHERE NOTICE_ID <![CDATA[<]]> #{currentNoticeNo}
	</select>
		<select id="selectNextNotice" resultType="_int">
		SELECT MIN(NOTICE_ID) FROM NOTICE_BOARD WHERE NOTICE_ID <![CDATA[>]]> #{currentNoticeNo}
	</select>
	<update id="updateNotice">
		UPDATE NOTICE_BOARD SET 
		NOTICE_TITLE=#{noticeTitle}
		, NOTICE_CONTENT=#{noticeContent}
		WHERE NOTICE_ID=#{noticeId}
	</update>
	<delete id="deleteNotice">
		DELETE FROM NOTICE_BOARD WHERE NOTICE_ID=#{noticeId}
	</delete>
	<update id="increaseViewCount">
	    UPDATE NOTICE_BOARD
	    SET VIEW_COUNT = VIEW_COUNT + 1
	    WHERE NOTICE_ID = #{noticeId}
	</update>
	<insert id="insertNotice">
		INSERT INTO NOTICE_BOARD VALUES(
			SEQ_NOTICE_ID.NEXTVAL
			, #{memberId}
			, #{noticeTitle}
			, #{noticeContent}
			, DEFAULT
			, DEFAULT
			, DEFAULT)
	</insert>
</mapper>